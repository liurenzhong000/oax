webpackJsonp([50],{bY2H:function(e,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t=n("ladc"),o={data:function(){return{boxphoneflag:!0,boxemailflag:!0,safePage:!1,phonecodemsg:"",emailcodemsg:"",googlecodemsg:"",oldcodemsg:"",newcodemsg:"",renewcodemsg:"",password:{oldPassword:"",newPassword:"",repeatPassword:""},personInfo:{},safeCode:{smsCode:"",emailCode:"",googleCode:""},userid:"",token:"",checkType:{},timecount1:60,timecount2:60,timeId1:"",timeId2:""}},methods:{generateUserChild:n("ivlf").C,toback:function(){this.$router.push({path:"/user/user_center"})},checkphone:function(){if(""===this.safeCode.smsCode)return this.phonecodemsg=this.generateUserChild("user_writeSmsCode"),!1;return/^[0-9]*$/.test(this.safeCode.smsCode)?(this.phonecodemsg="",!0):(this.phonecodemsg=this.generateUserChild("user_makesureYourCode"),!1)},checkemail:function(){if(""===this.safeCode.emailCode)return this.emailcodemsg=this.generateUserChild("user_writeEmailCode"),!1;return/^[0-9]*$/.test(this.safeCode.emailCode)?(this.emailcodemsg="",!0):(this.emailcodemsg=this.generateUserChild("user_makesureYourCode"),!1)},checkgoogle:function(){if(""===this.safeCode.googleCode)return this.googlecodemsg=this.generateUserChild("useer_wirteGoogleCode"),!1;return/^[0-9]*$/.test(this.safeCode.googleCode)?(this.googlecodemsg="",!0):(this.googlecodemsg=this.generateUserChild("user_makesureYourCode"),!1)},checkoldpass:function(){return""===this.password.oldPassword?(this.oldcodemsg=this.generateUserChild("user_OldLoginPassword"),!1):(this.oldcodemsg="",!0)},checknewpass:function(){if(""===this.password.newPassword)return this.newcodemsg=this.generateUserChild("user_NewLoginPassword"),!1;return/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$/.test(this.password.newPassword)?this.password.newPassword===this.password.oldPassword?(this.newcodemsg=this.generateUserChild("user_NewTradeCodeIsSame"),!1):(this.newcodemsg="",!0):(this.newcodemsg=this.generateUserChild("user_CodeRequest"),!1)},checkrenewpass:function(){return""===this.password.repeatPassword?(this.renewcodemsg=this.generateUserChild("user_ReNewLoginPassword"),!1):this.password.repeatPassword!==this.password.newPassword?(this.renewcodemsg=this.generateUserChild("user_repasswordIsWrong"),!1):(this.renewcodemsg="",!0)},getInfo:function(){var e=this,s=window.sessionStorage.oaxLoginAccessToken,n=window.sessionStorage.oaxLoginUserId;t.B(n,s).then(function(s){if(s.success){var n=s.data.usercenter;e.personInfo=n,e.personLog=s.data.userLoginLogList}})},getchecktype:function(){var e=this,s=this.personInfo.phone||this.personInfo.email;t.r(s).then(function(s){s.success?(e.checkType=s.data,e.flag=!1):e.$message.error(s.msg)}).catch(function(e){})},getphonecode:function(e,s){var n=this,o=this;o.boxphoneflag=!1,t.p(e,s).then(function(e){e.success||n.$message.error(e.msg)}).catch(function(e){}),this.timeId1=setInterval(function(){o.timecount1--,0===o.timecount1&&(o.timecount1=60,o.boxphoneflag=!1,clearInterval(n.timeId1))},1e3)},getemailcode:function(e){var s=this,n=this;n.boxemailflag=!1,t.v(e).then(function(e){e.success||s.$message.error(e.msg)}).catch(function(e){}),this.timeId2=setInterval(function(){n.timecount2--,0===n.timecount2&&(n.boxemailflag=!0,n.timecount2=60,clearInterval(s.timeId2))},1e3)},sendpas:function(){this.password.newPassword===this.password.repeatPassword&&t.t(this.password,this.userid,this.token).then(function(e){})},toSafe:function(){var e=this;if(this.checkoldpass()&&this.checknewpass()&&this.checkrenewpass()){var s={oldPassword:this.password.oldPassword,newPassword:this.password.newPassword,type:1};t.g(s).then(function(s){s.success?(e.safePage=!0,e.getchecktype()):"10058"===s.code&&(e.oldcodemsg=s.msg)})}else this.checkoldpass(),this.checknewpass(),this.checkrenewpass()},getsession:function(){this.userid=window.sessionStorage.oaxLoginUserId,this.token=window.sessionStorage.oaxLoginAccessToken},check:function(){return!(1===this.checkType.phoneStatus&&!this.checkphone())&&(!(1===this.checkType.emailStatus&&!this.checkemail())&&(!(1===this.checkType.googleStatus&&!this.checkgoogle())&&void this.submitChangePass()))},submitChangePass:function(){var e=this;this.safeCode.oldPassword=this.password.oldPassword,this.safeCode.newPassword=this.password.newPassword,this.safeCode.repeatPassword=this.password.repeatPassword,t.t(this.safeCode,this.userid,this.token).then(function(s){if(s.success)sessionStorage.removeItem("oaxLoginUserId"),e.$store.state.user.userId="",e.$router.push({path:"/login"});else{var n=s.msg,t=s.code;"10019"===t?e.emailcodemsg=n:"10007"===t?e.phonecodemsg=n:"10104"===t?e.googlecodemsg=n:"10058"===t?(e.safePage=!1,clearInterval(e.timeId1),clearInterval(e.timeId2),e.boxphoneflag=!0,e.boxemailflag=!0,e.timecount1=60,e.timecount2=60,e.safeCode={},e.oldcodemsg=n):"10063"===t?(e.safePage=!1,clearInterval(e.timeId1),clearInterval(e.timeId2),e.boxphoneflag=!0,e.boxemailflag=!0,e.timecount1=60,e.timecount2=60,e.safeCode={},e.newcodemsg=n):e.$message.error(s.msg)}}).catch(function(e){})}},filters:{hiddEmail:function(e){if(-1!==e.indexOf("@")){var s=e.indexOf("@");return e="****"+e.substring(s-4)}return e.substring(4,4)+"********"+e.substring(e.length-4)},hidePhoneMiddle:function(e){return e.substring(4,4)+"********"+e.substring(e.length-4)}},mounted:function(){this.getsession(),this.getInfo();var e=this;document.onkeydown=function(s){13===s.keyCode&&(e.safePage?e.check():e.toSafe())}},destroyed:function(){document.onkeydown=function(e){if(13===e.keyCode)return e.returnValue=!1,!1}}},a={render:function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("div",{staticClass:"changepass clearfix"},[n("div",{staticClass:"main"},[n("span",{staticClass:"returnback",on:{click:e.toback}}),e._v(" "),n("h1",[e._v(e._s(e.generateUserChild("user_ChangeLoginPassword")))]),e._v(" "),n("form",{attrs:{action:""}},[n("div",{staticClass:"old-pas"},[n("i"),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.password.oldPassword,expression:"password.oldPassword",modifiers:{trim:!0}}],attrs:{type:"password",placeholder:e.generateUserChild("user_OldLoginPassword"),maxlength:"50"},domProps:{value:e.password.oldPassword},on:{blur:[e.checkoldpass,function(s){e.$forceUpdate()}],input:function(s){s.target.composing||e.$set(e.password,"oldPassword",s.target.value.trim())}}}),e._v(" "),n("span",[e._v(e._s(e.oldcodemsg))])]),e._v(" "),n("div",{staticClass:"new-pas"},[n("i"),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password.newPassword,expression:"password.newPassword"}],attrs:{type:"password",placeholder:e.generateUserChild("user_NewLoginPassword"),maxlength:"16"},domProps:{value:e.password.newPassword},on:{blur:e.checknewpass,input:function(s){s.target.composing||e.$set(e.password,"newPassword",s.target.value)}}}),e._v(" "),n("span",[e._v(e._s(e.newcodemsg))])]),e._v(" "),n("div",{staticClass:"renew-pas"},[n("i"),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password.repeatPassword,expression:"password.repeatPassword"}],attrs:{type:"password",placeholder:e.generateUserChild("user_ReNewLoginPassword"),maxlength:"16"},domProps:{value:e.password.repeatPassword},on:{blur:e.checkrenewpass,input:function(s){s.target.composing||e.$set(e.password,"repeatPassword",s.target.value)}}}),e._v(" "),n("span",[e._v(e._s(e.renewcodemsg))])]),e._v(" "),n("div",{staticClass:"btn_submit",on:{click:e.toSafe}},[e._v(e._s(e.generateUserChild("user_submit")))])])]),e._v(" "),n("div",{staticClass:"safe clearfix"},[e.safePage?n("div",{staticClass:"mask"}):e._e(),e._v(" "),e.safePage?n("div",{staticClass:"safeContent"},[n("span",{staticClass:"returnback",on:{click:function(s){e.safePage=!1}}}),e._v(" "),n("h1",[e._v(e._s(e.generateUserChild("user_safeCheck")))]),e._v(" "),n("form",{attrs:{action:""}},[1===e.checkType.phoneStatus?n("p",[e._v(e._s(e.generateUserChild("user_phone"))+"："+e._s(e._f("hidePhoneMiddle")(e.personInfo.phone)))]):e._e(),e._v(" "),1===e.checkType.phoneStatus?n("div",{staticClass:"code phone"},[n("div",{staticClass:"code-l fl"},[n("i",{staticClass:"safeicon"}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.safeCode.smsCode,expression:"safeCode.smsCode"}],attrs:{type:"text",placeholder:e.generateUserChild("user_writeSmsCode"),maxlength:"10"},domProps:{value:e.safeCode.smsCode},on:{blur:e.checkphone,input:function(s){s.target.composing||e.$set(e.safeCode,"smsCode",s.target.value)}}})]),e._v(" "),n("div",{staticClass:"code-r fr"},[e.boxphoneflag?n("a",{on:{click:function(s){e.getphonecode(e.personInfo.phone,6)}}},[e._v(e._s(e.generateUserChild("user_getcode")))]):n("a",[e._v(e._s(e.timecount1)+e._s(e.generateUserChild("user_countDown")))])]),e._v(" "),n("span",[e._v(e._s(e.phonecodemsg))])]):e._e(),e._v(" "),1===e.checkType.emailStatus?n("p",[e._v(e._s(e.generateUserChild("user_email"))+"："+e._s(e._f("hiddEmail")(e.personInfo.email)))]):e._e(),e._v(" "),1===e.checkType.emailStatus?n("div",{staticClass:"code email"},[n("div",{staticClass:"code-l fl"},[n("i",{staticClass:"safeicon"}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.safeCode.emailCode,expression:"safeCode.emailCode"}],attrs:{type:"text",placeholder:e.generateUserChild("user_writeEmailCode"),maxlength:"10"},domProps:{value:e.safeCode.emailCode},on:{blur:e.checkemail,input:function(s){s.target.composing||e.$set(e.safeCode,"emailCode",s.target.value)}}})]),e._v(" "),n("div",{staticClass:"code-r fr"},[e.boxemailflag?n("a",{on:{click:function(s){e.getemailcode(e.personInfo.email)}}},[e._v(e._s(e.generateUserChild("user_getcode")))]):n("a",[e._v(e._s(e.timecount2)+e._s(e.generateUserChild("user_countDown")))])]),e._v(" "),n("span",[e._v(e._s(e.emailcodemsg))])]):e._e(),e._v(" "),1===e.checkType.googleStatus?n("p",[e._v(e._s(e.generateUserChild("user_google")))]):e._e(),e._v(" "),1===e.checkType.googleStatus?n("div",{staticClass:"code google"},[n("div",{staticClass:"google"},[n("i",{staticClass:"safeicon"}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.safeCode.googleCode,expression:"safeCode.googleCode"}],attrs:{type:"text",placeholder:e.generateUserChild("useer_wirteGoogleCode"),maxlength:"10"},domProps:{value:e.safeCode.googleCode},on:{blur:e.checkgoogle,input:function(s){s.target.composing||e.$set(e.safeCode,"googleCode",s.target.value)}}})]),e._v(" "),n("span",[e._v(e._s(e.googlecodemsg))])]):e._e(),e._v(" "),n("div",{staticClass:"btn_submit",on:{click:e.check}},[e._v(e._s(e.generateUserChild("user_submit")))])])]):e._e()])])},staticRenderFns:[]};var i=n("/Xao")(o,a,!1,function(e){n("oP1H")},"data-v-4af43c23",null);s.default=i.exports},oP1H:function(e,s,n){var t=n("wy4e");"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);n("8bSs")("4af71058",t,!0)},wy4e:function(e,s,n){(e.exports=n("BkJT")(!1)).push([e.i,"\n.changepass[data-v-4af43c23] {\n  width: 100%;\n  height: 100%;\n}\n.changepass .safe[data-v-4af43c23] {\n    width: 100%;\n    height: 100%;\n}\n.changepass .mask[data-v-4af43c23] {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n}\n.changepass .safeContent[data-v-4af43c23] {\n    width: 540px;\n    padding: 60px;\n    background-color: #fff;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    -webkit-transform: translate(-50%, -50%);\n            transform: translate(-50%, -50%);\n    z-index: 22;\n}\n.changepass .safeContent .returnback[data-v-4af43c23] {\n      display: inline-block;\n      width: 24px;\n      height: 24px;\n      background: url("+n("P9/e")+") no-repeat;\n      position: absolute;\n      top: 20px;\n      left: 30px;\n}\n.changepass .safeContent h1[data-v-4af43c23] {\n      width: 100%;\n      text-align: center;\n      font-size: 24px;\n      font-weight: 600;\n      margin: 0;\n}\n.changepass .safeContent form > div[data-v-4af43c23] {\n      width: 420px;\n      height: 48px;\n      border: 1px solid #eee;\n      margin-bottom: 30px;\n}\n.changepass .safeContent form > div .code-l[data-v-4af43c23] {\n        width: 290px;\n        height: 100%;\n}\n.changepass .safeContent form > div .code-l i[data-v-4af43c23] {\n          float: left;\n          display: inline-block;\n          width: 24px;\n          height: 24px;\n          margin: 11px 15px;\n          background: url("+n("Phm3")+");\n}\n.changepass .safeContent form > div .code-l input[data-v-4af43c23] {\n          float: left;\n          width: 216px;\n          height: 100%;\n          border: none;\n          outline: none;\n          font-size: 14px;\n          color: #333;\n}\n.changepass .safeContent form > div .code-r a[data-v-4af43c23] {\n        display: inline-block;\n        text-align: center;\n        width: 125px;\n        height: 46px;\n        line-height: 48px;\n        background-color: #fff;\n        color: #FFB933;\n        font-size: 14px;\n        border: none;\n}\n.changepass .safeContent form > div span[data-v-4af43c23] {\n        display: inline-block;\n        color: #FF5656;\n        text-align: right;\n        font-size: 12px;\n        float: right;\n        padding: 6px 3px;\n        height: 14px;\n        width: 100%;\n}\n.changepass .safeContent form > div .google[data-v-4af43c23] {\n        width: 328px;\n        height: 100%;\n}\n.changepass .safeContent form > div .google i[data-v-4af43c23] {\n          float: left;\n          display: inline-block;\n          width: 24px;\n          height: 24px;\n          margin: 12px 15px;\n          background: url("+n("Phm3")+");\n}\n.changepass .safeContent form > div .google input[data-v-4af43c23] {\n          float: left;\n          width: 216px;\n          height: 100%;\n          border: none;\n          outline: none;\n          font-size: 14px;\n          color: #333;\n}\n.changepass .safeContent form .phone i[data-v-4af43c23] {\n      background: url("+n("tAd5")+");\n}\n.changepass .safeContent form .email i[data-v-4af43c23] {\n      background: url("+n("vqCc")+");\n}\n.changepass .safeContent form .google i[data-v-4af43c23] {\n      background: url("+n("oIUg")+");\n}\n.changepass .safeContent form .btn_submit[data-v-4af43c23] {\n      line-height: 48px;\n      text-align: center;\n      width: 420px;\n      height: 48px;\n      background-color: #FFB933;\n      border: none;\n      margin-top: 15px;\n      outline: none;\n      cursor: pointer;\n}\n.main[data-v-4af43c23] {\n  width: 480px;\n  padding: 30px 10px;\n  background-color: #fff;\n  border: 1px solid #fff;\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n}\n.main .returnback[data-v-4af43c23] {\n    display: inline-block;\n    width: 24px;\n    height: 24px;\n    background: url("+n("P9/e")+") no-repeat;\n    position: absolute;\n    top: 20px;\n    left: 30px;\n}\n.main h1[data-v-4af43c23] {\n    font-size: 24px;\n    font-weight: 600;\n    margin: 26px 0 46px;\n    text-align: center;\n}\n.main form > div[data-v-4af43c23] {\n    width: 420px;\n    height: 48px;\n    margin: 0 auto;\n    margin-bottom: 18px;\n    border: 1px solid #eee;\n    margin-bottom: 35px;\n}\n.main form > div i[data-v-4af43c23] {\n      float: left;\n      display: inline-block;\n      width: 24px;\n      height: 24px;\n      margin: 11px 15px;\n      background: url("+n("nDBO")+");\n}\n.main form > div input[data-v-4af43c23] {\n      float: left;\n      width: 358px;\n      height: 100%;\n      border: none;\n      outline: none;\n      font-size: 14px;\n      color: #333;\n}\n.main form > div span[data-v-4af43c23] {\n      display: inline-block;\n      color: #FF5656;\n      text-align: left;\n      font-size: 12px;\n      float: right;\n      padding: 4px 3px;\n      text-align: right;\n}\n.main form .btn_submit[data-v-4af43c23] {\n    display: block;\n    width: 420px;\n    height: 48px;\n    border: none;\n    background: #FFB933;\n    margin: 0 auto;\n    outline: none;\n    text-align: center;\n    line-height: 48px;\n    font-weight: 500;\n    cursor: pointer;\n}\n",""])}});