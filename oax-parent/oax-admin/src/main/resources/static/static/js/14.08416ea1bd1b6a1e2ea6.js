webpackJsonp([14],{"+B7V":function(e,t,r){var a=r("8Nvm"),o=Math.floor;e.exports=function(e){return!a(e)&&isFinite(e)&&o(e)===e}},"2H9m":function(e,t,r){var a=r("ZrAb");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("8bSs")("afc9d6f4",a,!0)},"2Tkx":function(e,t,r){var a=r("FITv");a(a.S,"Number",{isInteger:r("+B7V")})},"4Xi4":function(e,t,r){e.exports={default:r("OPii"),__esModule:!0}},OPii:function(e,t,r){r("2Tkx"),e.exports=r("AKd3").Number.isInteger},ZrAb:function(e,t,r){(e.exports=r("BkJT")(!1)).push([e.i,"\n.mini-dialog .el-dialog[data-v-0ca5d31d] {\n  width: 15%;\n  min-width: 400px;\n  height: 70%;\n}\n",""])},onbd:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("IHPB"),o=r.n(a),n=r("4Xi4"),l=r.n(n),s=r("1onU"),i=r("vLgD");function u(e,t){return Object(i.a)({url:"users/"+e+"/enable/"+t,method:"post"})}var c=r("6lZ+"),g={data:function(){var e=this;return{listloading:!1,registerLoading:!1,dialogFormVisible:!1,userdialogForm:!1,roleidArray:[],current_userid:"",tableData:[],checked:!0,pageInfo:{current_page:1,from:1,last_page:1,next_page_url:null,path:"",per_page:10,prev_page_url:null,to:1,total:1},singleSelect:{},multipleSelection:{},rolemultipleTable:[],reqData:{pageNum:1,pageSize:10,userStatus:null,userId:null,username:null},roleData:[],registerForm:{email:"",password:"",phone:"",name:"",username:""},rules:{userId:[{type:"number",message:this.generateAuthority("gs"),trigger:["blur","change"]}],username:[{type:"string",message:this.generateAuthority("rightname"),trigger:["blur","change"]}]},registerRules:{email:[{required:!0,message:this.generateAuthority("inemail"),trigger:"blur"},{type:"email",message:this.generateAuthority("rightaddress"),trigger:["blur","change"]}],phone:[{required:!0,validator:function(t,r,a){if(!r)return a(new Error(e.generateAuthority("inphone")));l()(r)?11!==String(r).length?a(new Error(e.generateAuthority("phoneError"))):a():a(new Error(e.generateAuthority("phoneNum")))},trigger:"blur"}],password:[{required:!0,message:this.generateAuthority("inpassword"),trigger:"blur"},{min:6,max:16,message:this.generateAuthority("passwordlength"),trigger:"blur"}],name:[{required:!0,message:this.generateAuthority("inname"),trigger:"blur"}],username:[{required:!0,trigger:"blur",validator:function(t,r,a){if(!r)return a(new Error(e.generateAuthority("inusername")));String(r).length<3?a(new Error(e.generateAuthority("userlength"))):a()}}]}}},methods:{generateAuthority:r("ivlf").b,infocancel:function(){this.userdialogForm=!1,this.registerForm={email:"",password:"",tel:"",name:"",username:""}},handleSelectionChange:function(e){this.multipleSelection=e},rolehandleSelectionChange:function(e){this.rolemultipleTable=e},handleList:function(){var e=this;this.listloading=!0,this.reqData.userId=this.reqData.userId||null,this.$refs.reqData.validate(function(t){if(!t)return console.log("error search!!"),!1;var r;e.listloading=!0,e.reqData.username=e.reqData.username||null,(r=e.reqData,Object(i.a)({url:"users/page",method:"post",data:r})).then(function(t){e.listloading=!1;var r=t.data;e.tableData=r.list,e.pageInfo={current_page:Number(r.pageNum),from:1,last_page:r.lastPage,next_page_url:null,path:"",per_page:r.pageSize,prev_page_url:null,to:1,total:r.total}}).catch(function(t){e.$message.error(e.generateAuthority("rightname")),console.log(t),e.listloading=!1})})},openUser:function(e){var t=this;u(e.id,1).then(function(r){e.enable=1,t.$message.success(t.generateAuthority("opensuccess"))}).catch(function(e){console.log(e)})},closeUser:function(e){var t=this;u(e.id,0).then(function(r){e.enable=0,t.$message.success(t.generateAuthority("closesuccess"))}).catch(function(e){console.log(e)})},handleSizeChange:function(e){this.reqData.pageSize=e,this.handleList()},handleCurrentChange:function(e){this.reqData.pageNum=e,this.handleList()},deleteRole:function(e){var t,r=this;(t=e,Object(i.a)({url:"users/"+t,method:"delete"})).then(function(e){r.$message.success(e.msg),r.handleList()}).catch(function(e){console.log(e)})},addRole:function(){this.userdialogForm=!0,console.log("add")},save:function(){var e,t=this;if(!this.rolemultipleTable.length)return this.$message.error(this.generateAuthority("selectuser")),!1;this.roleidArray=this.rolemultipleTable.map(function(e){return e.id}),console.log(this.roleidArray),this.roleidArray&&(e={userid:this.current_userid,roleidArray:this.roleidArray.join(",")},Object(i.a)({url:"users/userRole",method:"post",data:e})).then(function(e){t.$message.success(e.msg),t.dialogFormVisible=!1}).catch(function(e){console.log(e),t.dialogFormVisible=!1})},role:function(e){var t,r=this;this.dialogFormVisible=!0,this.current_userid=e,(t=e,Object(i.a)({url:"roles/rolesWithSelected/"+t,method:"get"})).then(function(e){r.roleData=[].concat(o()(e.data)),console.log(r.rolemultipleTable)}).then(function(e){for(var t=0;t<r.roleData.length;t++)r.roleData[t].selected&&r.$refs.rolemultipleTable.toggleRowSelection(r.roleData[t])}).catch(function(e){console.log(e)})},usersave:function(){var e=this;this.$refs.registerForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;var r;e.registerLoading=!0,(r=e.registerForm,Object(i.a)({url:"users",method:"post",data:r})).then(function(t){e.registerLoading=!1,e.$message.success(t.msg),e.userdialogForm=!1,e.registerForm={email:"",password:"",tel:"",name:"",username:""},e.handleList()}).catch(function(){e.registerLoading=!1})})},cancel:function(){this.dialogFormVisible=!1,this.rolemultipleTable=this.$refs.rolemultipleTable,this.$refs.rolemultipleTable.clearSelection()}},mounted:function(){this.handleList()},components:{Pagination:s.a,QuitConfirm:c.a}},m={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page"},[r("section",{staticClass:"filter-container clearfix"},[r("el-form",{ref:"reqData",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.reqData,rules:e.rules}},[r("el-form-item",{attrs:{label:"ID",prop:"userId"}},[r("el-input",{attrs:{type:"userId"},model:{value:e.reqData.userId,callback:function(t){e.$set(e.reqData,"userId",e._n(t))},expression:"reqData.userId"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.generateAuthority("username"),prop:"username"}},[r("el-input",{attrs:{type:"username"},model:{value:e.reqData.username,callback:function(t){e.$set(e.reqData,"username",t)},expression:"reqData.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.generateAuthority("isuse")}},[r("el-select",{attrs:{placeholder:e.generateAuthority("selectStatus")},model:{value:e.reqData.userStatus,callback:function(t){e.$set(e.reqData,"userStatus",t)},expression:"reqData.userStatus"}},[r("el-option",{attrs:{label:e.generateAuthority("all"),value:""}}),e._v(" "),r("el-option",{attrs:{label:e.generateAuthority("open"),value:"1"}}),e._v(" "),r("el-option",{attrs:{label:e.generateAuthority("close"),value:"0"}})],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.handleList}},[e._v(e._s(e.generateAuthority("query")))])],1)],1)],1),e._v(" "),r("section",{staticClass:"list-table-container"},[r("section",{staticClass:"btn-container-area clearfix"},[r("el-button",{attrs:{type:"success"},on:{click:e.addRole}},[e._v(e._s(e.generateAuthority("add")))])],1),e._v(" "),r("section",{directives:[{name:"loading",rawName:"v-loading",value:e.listloading,expression:"listloading"}],staticClass:"table-container-area"},[r("el-table",{staticClass:"table",attrs:{data:e.tableData}},[r("el-table-column",{attrs:{width:"55"}}),e._v(" "),r("el-table-column",{attrs:{label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("p",{attrs:{title:t.row.id}},[r("span",[e._v(e._s(t.row.id))])])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e.generateAuthority("username")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("p",{attrs:{title:t.row.username}},[r("span",[e._v(e._s(t.row.username))])])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e.generateAuthority("isuse")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.enable?e._e():r("p",[e._v(e._s(e.generateAuthority("close")))]),e._v(" "),1===t.row.enable?r("p",[e._v(e._s(e.generateAuthority("open")))]):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{label:e.generateAuthority("control")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary"},on:{click:function(r){e.role(t.row.id)}}},[e._v(e._s(e.generateAuthority("fprole")))]),e._v(" "),t.row.enable?e._e():r("quit-confirm",{attrs:{type:"success",message:e.generateAuthority("isopen")},on:{handle:function(r){e.openUser(t.row,1)}}},[e._v(e._s(e.generateAuthority("open")))]),e._v(" "),1===t.row.enable?r("quit-confirm",{attrs:{type:"warning",message:e.generateAuthority("isclose")},on:{handle:function(r){e.closeUser(t.row,0)}}},[e._v(e._s(e.generateAuthority("close")))]):e._e(),e._v(" "),r("quit-confirm",{attrs:{message:e.generateAuthority("delmsg"),type:"danger"},on:{handle:function(r){e.deleteRole(t.row.id)}}},[e._v(e._s(e.generateAuthority("del")))])]}}])})],1)],1),e._v(" "),r("section",{staticClass:"pagination-container"},[r("Pagination",{attrs:{pageInfo:e.pageInfo},on:{sizeChange:e.handleSizeChange,currentChange:e.handleCurrentChange}})],1)]),e._v(" "),r("el-dialog",{staticClass:"center-dialog mini-dialog",attrs:{title:e.generateAuthority("fprole"),visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-table",{ref:"rolemultipleTable",staticClass:"table",attrs:{data:e.roleData,"tooltip-effect":"dark"},on:{"selection-change":e.rolehandleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{label:e.generateAuthority("allselect")},scopedSlots:e._u([{key:"default",fn:function(t){return[r("p",{attrs:{title:t.row.roledesc}},[r("span",[e._v(e._s(t.row.roledesc))])])]}}])})],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.generateAuthority("save")))]),e._v(" "),r("el-button",{on:{click:e.cancel}},[e._v(e._s(e.generateAuthority("cancle")))])],1)],1),e._v(" "),r("el-dialog",{staticClass:"center-dialog small-dialog",attrs:{title:e.generateAuthority("adduser"),visible:e.userdialogForm},on:{"update:visible":function(t){e.userdialogForm=t}}},[r("section",{staticClass:"filter-container clearfix"},[r("el-form",{ref:"registerForm",attrs:{model:e.registerForm,"label-width":"100px",rules:e.registerRules}},[r("el-form-item",{attrs:{prop:"username",label:e.generateAuthority("username")+"："}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:e.generateAuthority("inusername"),clearable:""},model:{value:e.registerForm.username,callback:function(t){e.$set(e.registerForm,"username",t)},expression:"registerForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"password",label:e.generateAuthority("password")+"："}},[r("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:e.generateAuthority("inpassword"),clearable:""},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"phone",label:e.generateAuthority("phone")+"："}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:e.generateAuthority("inphone"),clearable:""},model:{value:e.registerForm.phone,callback:function(t){e.$set(e.registerForm,"phone",e._n(t))},expression:"registerForm.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"email",label:e.generateAuthority("email")+"："}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:e.generateAuthority("inemail"),clearable:""},model:{value:e.registerForm.email,callback:function(t){e.$set(e.registerForm,"email",t)},expression:"registerForm.email"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"name",label:e.generateAuthority("name")+"："}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:e.generateAuthority("inname"),clearable:""},model:{value:e.registerForm.name,callback:function(t){e.$set(e.registerForm,"name",t)},expression:"registerForm.name"}})],1)],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",disabled:!e.checked,loading:e.registerLoading},nativeOn:{click:function(t){t.preventDefault(),e.usersave(t)}}},[e._v(e._s(e.generateAuthority("save")))]),e._v(" "),r("el-button",{on:{click:function(t){e.infocancel()}}},[e._v(e._s(e.generateAuthority("cancel")))])],1)])],1)},staticRenderFns:[]};var d=r("/Xao")(g,m,!1,function(e){r("2H9m")},"data-v-0ca5d31d",null);t.default=d.exports}});